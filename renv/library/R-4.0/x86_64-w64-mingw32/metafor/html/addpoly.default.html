<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Add Polygons to Forest Plots (Default Method)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for addpoly.default {metafor}"><tr><td>addpoly.default {metafor}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Add Polygons to Forest Plots (Default Method)</h2>

<h3>Description</h3>

<p>Function to add one or more polygons to a forest plot.</p>


<h3>Usage</h3>

<pre>
## Default S3 method:
addpoly(x, vi, sei, ci.lb, ci.ub, cr.lb, cr.ub,
        rows=-1, level=95, annotate=TRUE, digits=2, width, mlab,
        transf, atransf, targs, efac=1, col, border, fonts, cex, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>vector with the values at which the polygons should be drawn.</p>
</td></tr>
<tr valign="top"><td><code>vi</code></td>
<td>
<p>vector with the corresponding variances.</p>
</td></tr>
<tr valign="top"><td><code>sei</code></td>
<td>
<p>vector with the corresponding standard errors note: only one of the two, <code>vi</code> or <code>sei</code>, needs to be specified).</p>
</td></tr>
<tr valign="top"><td><code>ci.lb</code></td>
<td>
<p>vector with the corresponding lower confidence interval bounds. Not needed if <code>vi</code> or <code>sei</code> is specified. See &lsquo;Details&rsquo;.</p>
</td></tr>
<tr valign="top"><td><code>ci.ub</code></td>
<td>
<p>vector with the corresponding upper confidence interval bounds. Not needed if <code>vi</code> or <code>sei</code> is specified. See &lsquo;Details&rsquo;.</p>
</td></tr>
<tr valign="top"><td><code>cr.lb</code></td>
<td>
<p>optional vector with the corresponding lower credibility/prediction interval bounds.</p>
</td></tr>
<tr valign="top"><td><code>cr.ub</code></td>
<td>
<p>optional vector with the corresponding upper credibility/prediction interval bounds.</p>
</td></tr>
<tr valign="top"><td><code>rows</code></td>
<td>
<p>vector specifying the rows (or more generally, the horizontal positions) for plotting the polygons (defaults is <code>-1</code>). Can also be a single value specifying the row (horizontal position) of the first polygon (the remaining polygons are then plotted below this starting row).</p>
</td></tr>
<tr valign="top"><td><code>level</code></td>
<td>
<p>numerical value between 0 and 100 specifying the confidence interval level (the default is 95).</p>
</td></tr>
<tr valign="top"><td><code>annotate</code></td>
<td>
<p>logical specifying whether annotations should be added to the plot for the polygons that are drawn (the default is <code>TRUE</code>).</p>
</td></tr>
<tr valign="top"><td><code>digits</code></td>
<td>
<p>integer specifying the number of decimal places to which the annotations should be rounded (the default is 2).</p>
</td></tr>
<tr valign="top"><td><code>width</code></td>
<td>
<p>optional integer to manually adjust the width of the columns for the annotations.</p>
</td></tr>
<tr valign="top"><td><code>mlab</code></td>
<td>
<p>optional character vector with the same length as <code>x</code> giving labels for the polygons that are drawn.</p>
</td></tr>
<tr valign="top"><td><code>transf</code></td>
<td>
<p>optional argument specifying the name of a function that should be used to transform the <code>x</code> values and confidence interval bounds (e.g., <code>transf=exp</code>; see also <a href="transf.html">transf</a>). If unspecified, no transformation is used.</p>
</td></tr>
<tr valign="top"><td><code>atransf</code></td>
<td>
<p>optional argument specifying the name of a function that should be used to transform the annotations (e.g., <code>atransf=exp</code>; see also <a href="transf.html">transf</a>). If unspecified, no transformation is used.</p>
</td></tr>
<tr valign="top"><td><code>targs</code></td>
<td>
<p>optional arguments needed by the function specified via <code>transf</code> or <code>atransf</code>.</p>
</td></tr>
<tr valign="top"><td><code>efac</code></td>
<td>
<p>vertical expansion factor for the polygons. The default value of 1 should usually work okay.</p>
</td></tr>
<tr valign="top"><td><code>col</code></td>
<td>
<p>optional character string specifying the name of a color to use for the polygons. If unspecified, the function sets a default color.</p>
</td></tr>
<tr valign="top"><td><code>border</code></td>
<td>
<p>optional character string specifying the name of a color to use for the border of the polygons. If unspecified, the function sets a default color.</p>
</td></tr>
<tr valign="top"><td><code>fonts</code></td>
<td>
<p>optional character string specifying the font to use for the labels and annotations. If unspecified, the default font is used.</p>
</td></tr>
<tr valign="top"><td><code>cex</code></td>
<td>
<p>optional symbol expansion factor. If unspecified, the function tries to set this to a sensible value.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can be used to add one or more polygons to an existing forest plot created with the <code><a href="forest.html">forest</a></code> function. For example, summary estimates based on a model involving moderators can be added to the plot this way. See example below.
</p>
<p>To use the function, one should specify the values at which the polygons should be drawn (via the <code>x</code> argument) together with the corresponding variances (via the <code>vi</code> argument) or with the corresponding standard errors (via the <code>sei</code> argument). Alternatively, one can specify the values at which the polygons should be drawn together with the corresponding confidence interval bounds (via the <code>ci.lb</code> and <code>ci.ub</code> arguments). Optionally, one can also specify the bounds of the corresponding credibility/prediction interval bounds via the <code>cr.lb</code> and <code>cr.ub</code> arguments.
</p>
<p>The arguments <code>transf</code>, <code>atransf</code>, <code>efac</code>, and <code>cex</code> should always be set equal to the same values used to create the forest plot.
</p>


<h3>Author(s)</h3>

<p>Wolfgang Viechtbauer <a href="mailto:wvb@metafor-project.org">wvb@metafor-project.org</a> <a href="http://www.metafor-project.org/">http://www.metafor-project.org/</a>
</p>


<h3>References</h3>

<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1&ndash;48. <a href="https://www.jstatsoft.org/v036/i03">https://www.jstatsoft.org/v036/i03</a>.
</p>


<h3>See Also</h3>

<p><code><a href="forest.rma.html">forest.rma</a></code>, <code><a href="forest.default.html">forest.default</a></code>
</p>


<h3>Examples</h3>

<pre>
### meta-analysis of the log risk ratios using a mixed-
### effects model with absolute latitude as a moderator
res &lt;- rma(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, mods = ~ ablat,
           slab=paste(author, year, sep=", "), data=dat.bcg)

### forest plot of the observed risk ratios
forest(res, addfit=FALSE, atransf=exp, xlim=c(-8,5), ylim=c(-4.5,16), cex=.8,
       order=order(dat.bcg$ablat), ilab=dat.bcg$ablat, ilab.xpos=-4,
       header="Author(s) and Year")

### predicted average log risk ratios for 10, 30, and 50 degrees absolute latitude
x &lt;- predict(res, newmods=c(10, 30, 50))

### add predicted average risk ratios to forest plot
addpoly(x$pred, sei=x$se, atransf=exp, col="white", rows=-2,
        mlab=c("- at 10 Degrees", "- at 30 Degrees", "- at 50 Degrees"), cex=.8)
abline(h=0)
text(-8, -1, "Model-Based Estimates of RR:", pos=4, cex=.8)
text(-4, 15, "Latitude", cex=.8, font=2)
</pre>

<hr /><div style="text-align: center;">[Package <em>metafor</em> version 2.4-0 <a href="00Index.html">Index</a>]</div>
</body></html>
