<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Create interactive legend guide</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for guide_legend_interactive {ggiraph}"><tr><td>guide_legend_interactive {ggiraph}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Create interactive legend guide</h2>

<h3>Description</h3>

<p>The guide is based on <code><a href="../../ggplot2/html/guide_legend.html">guide_legend()</a></code>.
See the documentation for that function for more details.
</p>


<h3>Usage</h3>

<pre>
guide_legend_interactive(...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>...</code></td>
<td>
<p>arguments passed to base function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An interactive guide object.
</p>


<h3>Details for scale_<em><em>interactive and guide</em></em>_interactive functions</h3>

<p>For scales, the interactive parameters can be supplied as arguments in the relevant function
and they can be scalar values or vectors, depending on the number of breaks (levels) and
the type of the guide used.
The guides do not accept any interactive parameter directly, they receive them from the scales.
</p>

<ul>
<li><p> When guide of type <code>legend</code> or <code>bins</code> is used, it will be converted to a
<code><a href="guide_legend_interactive.html">guide_legend_interactive()</a></code> or <code><a href="guide_bins_interactive.html">guide_bins_interactive()</a></code> respectively,
if it's not already.
</p>
<p>The length of each scale interactive parameter vector should match the length of the breaks.
It can also be a named vector, where each name should correspond to the same break name.
It can also be defined as function that takes the breaks as input and returns a named or
unnamed vector of values as output.
</p>
<p>The interactive parameters here, give interactivity only to the key elements of the guide.
</p>
</li>
<li><p> When guide of type <code>colourbar</code> or <code>coloursteps</code> is used, it will be converted to a
<code><a href="guide_colourbar_interactive.html">guide_colourbar_interactive()</a></code> or <code><a href="guide_coloursteps_interactive.html">guide_coloursteps_interactive()</a></code>
respectively, if it's not already.
</p>
<p>The scale interactive parameters in this case should be scalar values and give interactivity
to the colorbar only.
</p>
</li></ul>

<p>To provide interactivity to the rest of the elements of a guide, (title, labels, background, etc),
the relevant theme elements or relevant guide arguments can be used.
The <code>guide</code> arguments <code>title.theme</code> and <code>label.theme</code> can be defined as
<code>element_text_interactive</code> (in fact, they will be converted to that if they are not
already), either directly or via the theme.
See the element_*_interactive section for more details.
</p>


<h3>See Also</h3>

<p><code><a href="ipar.html">interactive_parameters()</a></code>, <code><a href="girafe.html">girafe()</a></code>
</p>


<h3>Examples</h3>

<pre>
# add interactive discrete legend guide to a ggplot -------
library(ggplot2)
library(ggiraph)

dat &lt;- data.frame(
  name = c( "Guy", "Ginette", "David", "Cedric", "Frederic" ),
  gender = c( "Male", "Female", "Male", "Male", "Male" ),
  height = c(169, 160, 171, 172, 171 ) )
p &lt;- ggplot(dat, aes( x = name, y = height, fill = gender,
                      data_id = name ) ) +
  geom_bar_interactive(stat = "identity")

# add interactive scale (guide is legend)
p1 &lt;- p +
  scale_fill_manual_interactive(
    values = c(Male = "#0072B2", Female = "#009E73"),
    data_id = c(Female = "Female", Male = "Male"),
    tooltip = c(Male = "Male", Female = "Female")
  )
x &lt;- girafe(ggobj = p1)
if (interactive()) print(x)

# make the title interactive too
p2 &lt;- p +
  scale_fill_manual_interactive(
    name = label_interactive("gender", tooltip="Gender levels", data_id="legend.title"),
    values = c(Male = "#0072B2", Female = "#009E73"),
    data_id = c(Female = "Female", Male = "Male"),
    tooltip = c(Male = "Male", Female = "Female")
  )
x &lt;- girafe(ggobj = p2)
x &lt;- girafe_options(x,
                    opts_hover_key(girafe_css("stroke:red", text="stroke:none;fill:red")))
if (interactive()) print(x)

# the interactive params can be functions too
p3 &lt;- p +
  scale_fill_manual_interactive(
    name = label_interactive("gender", tooltip="Gender levels", data_id="legend.title"),
    values = c(Male = "#0072B2", Female = "#009E73"),
    data_id = function(breaks) { as.character(breaks)},
    tooltip = function(breaks) { as.character(breaks)},
    onclick = function(breaks) { paste0("alert(\"", as.character(breaks), "\")") }
  )
x &lt;- girafe(ggobj = p3)
x &lt;- girafe_options(x,
                    opts_hover_key(girafe_css("stroke:red", text="stroke:none;fill:red")))
if (interactive()) print(x)

# also via the guide
p4 &lt;- p + scale_fill_manual_interactive(
  values = c(Male = "#0072B2", Female = "#009E73"),
  data_id = function(breaks) { as.character(breaks)},
  tooltip = function(breaks) { as.character(breaks)},
  onclick = function(breaks) { paste0("alert(\"", as.character(breaks), "\")") },
  guide = guide_legend_interactive(
    title.theme = element_text_interactive(
      size = 8,
      data_id = "legend.title",
      onclick = "alert(\"Gender levels\")",
      tooltip = "Gender levels"
    ),
    label.theme = element_text_interactive(
      size = 8
    )
  )
)
x &lt;- girafe(ggobj = p4)
x &lt;- girafe_options(x,
                    opts_hover_key(girafe_css("stroke:red", text="stroke:none;fill:red")))
if (interactive()) print(x)

# make the legend labels interactive
p5 &lt;- p +
  scale_fill_manual_interactive(
    name = label_interactive("gender", tooltip="Gender levels", data_id="legend.title"),
    values = c(Male = "#0072B2", Female = "#009E73"),
    data_id = function(breaks) { as.character(breaks)},
    tooltip = function(breaks) { as.character(breaks)},
    onclick = function(breaks) { paste0("alert(\"", as.character(breaks), "\")") },
    labels = function(breaks) {
      lapply(breaks, function(br) {
        label_interactive(
          as.character(br),
          data_id = as.character(br),
          onclick = paste0("alert(\"", as.character(br), "\")"),
          tooltip = as.character(br)
        )
      })
    }
  )
x &lt;- girafe(ggobj = p5)
x &lt;- girafe_options(x,
                    opts_hover_key(girafe_css("stroke:red", text="stroke:none;fill:red")))
if (interactive()) print(x)
# add interactive continuous legend guide to a ggplot -------
library(ggplot2)
library(ggiraph)

set.seed(4393)
dsmall &lt;- diamonds[sample(nrow(diamonds), 1000),]
p &lt;- ggplot(dsmall, aes(x, y)) +
  stat_density_2d(aes(
    fill = stat(nlevel),
    tooltip = paste("nlevel:", stat(nlevel))
  ),
  geom = "interactive_polygon") +
  facet_grid(. ~ cut)

# add interactive scale, by default the guide is a colourbar
p1 &lt;- p + scale_fill_viridis_c_interactive(data_id = "nlevel",
                                           tooltip = "nlevel")
x &lt;- girafe(ggobj = p1)
if (interactive()) print(x)

# make it legend
p2 &lt;- p + scale_fill_viridis_c_interactive(data_id = "nlevel",
                                           tooltip = "nlevel",
                                           guide = "legend")
x &lt;- girafe(ggobj = p2)
if (interactive()) print(x)

# set the keys separately
p3 &lt;- p + scale_fill_viridis_c_interactive(
  data_id = function(breaks) {
    as.character(breaks)
  },
  tooltip = function(breaks) {
    as.character(breaks)
  },
  guide = "legend"
)
x &lt;- girafe(ggobj = p3)
if (interactive()) print(x)


# make the title and labels interactive
p4 &lt;- p + scale_fill_viridis_c_interactive(
  data_id = function(breaks) {
    as.character(breaks)
  },
  tooltip = function(breaks) {
    as.character(breaks)
  },
  guide = "legend",
  name = label_interactive("nlevel", data_id = "nlevel",
                           tooltip = "nlevel"),
  labels = function(breaks) {
    l &lt;- lapply(breaks, function(br) {
      label_interactive(
        as.character(br),
        data_id = as.character(br),
        onclick = paste0("alert(\"", as.character(br), "\")"),
        tooltip = as.character(br)
      )
    })
    l
  }
)
x &lt;- girafe(ggobj = p4)
x &lt;- girafe_options(x,
                    opts_hover_key(girafe_css("stroke:red", text="stroke:none;fill:red")))
if (interactive()) print(x)

</pre>

<hr /><div style="text-align: center;">[Package <em>ggiraph</em> version 0.7.10 <a href="00Index.html">Index</a>]</div>
</body></html>
