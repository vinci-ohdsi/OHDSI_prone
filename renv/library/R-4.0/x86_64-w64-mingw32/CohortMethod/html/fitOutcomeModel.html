<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Create an outcome model, and compute the relative risk</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for fitOutcomeModel {CohortMethod}"><tr><td>fitOutcomeModel {CohortMethod}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Create an outcome model, and compute the relative risk</h2>

<h3>Description</h3>

<p>Create an outcome model, and computes the relative risk
</p>


<h3>Usage</h3>

<pre>
fitOutcomeModel(
  population,
  cohortMethodData = NULL,
  modelType = "logistic",
  stratified = FALSE,
  useCovariates = FALSE,
  inversePtWeighting = FALSE,
  estimator = "ate",
  maxWeight = 0,
  interactionCovariateIds = c(),
  excludeCovariateIds = c(),
  includeCovariateIds = c(),
  profileGrid = NULL,
  profileBounds = c(log(0.1), log(10)),
  prior = createPrior("laplace", useCrossValidation = TRUE),
  control = createControl(cvType = "auto", seed = 1, startingVariance = 0.01, tolerance
    = 2e-07, cvRepetitions = 10, noiseLevel = "quiet")
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>population</code></td>
<td>
<p>A population object generated by <code><a href="createStudyPopulation.html">createStudyPopulation()</a></code>,
potentially filtered by other functions.</p>
</td></tr>
<tr valign="top"><td><code>cohortMethodData</code></td>
<td>
<p>An object of type <a href="CohortMethodData-class.html">CohortMethodData</a> as generated using
<code><a href="getDbCohortMethodData.html">getDbCohortMethodData()</a></code>. Can be omitted if not using covariates and
not using interaction terms.</p>
</td></tr>
<tr valign="top"><td><code>modelType</code></td>
<td>
<p>The type of outcome model that will be used. Possible values are
&quot;logistic&quot;, &quot;poisson&quot;, or &quot;cox&quot;.</p>
</td></tr>
<tr valign="top"><td><code>stratified</code></td>
<td>
<p>Should the regression be conditioned on the strata defined in the
population object (e.g. by matching or stratifying on propensity
scores)?</p>
</td></tr>
<tr valign="top"><td><code>useCovariates</code></td>
<td>
<p>Whether to use the covariates in the <code>cohortMethodData</code>
object in the outcome model.</p>
</td></tr>
<tr valign="top"><td><code>inversePtWeighting</code></td>
<td>
<p>Use inverse probability of treatment weighting (IPTW)? See details.</p>
</td></tr>
<tr valign="top"><td><code>estimator</code></td>
<td>
<p>for IPTW: the type of estimator. Options are <code>estimator = "ate"</code> for the
average treatment effect, and <code>estimator = "att"</code>for the average treatment
effect in the treated.</p>
</td></tr>
<tr valign="top"><td><code>maxWeight</code></td>
<td>
<p>for IPTW: the maximum weight. Larger values will be truncated to this
value. <code>maxWeight = 0</code> means no truncation takes place.</p>
</td></tr>
<tr valign="top"><td><code>interactionCovariateIds</code></td>
<td>
<p>An optional vector of covariate IDs to use to estimate interactions
with the main treatment effect.</p>
</td></tr>
<tr valign="top"><td><code>excludeCovariateIds</code></td>
<td>
<p>Exclude these covariates from the outcome model.</p>
</td></tr>
<tr valign="top"><td><code>includeCovariateIds</code></td>
<td>
<p>Include only these covariates in the outcome model.</p>
</td></tr>
<tr valign="top"><td><code>profileGrid</code></td>
<td>
<p>A one-dimensional grid of points on the log(relative risk) scale where
the likelihood for coefficient of variables is sampled. See details.</p>
</td></tr>
<tr valign="top"><td><code>profileBounds</code></td>
<td>
<p>The bounds (on the log relative risk scale) for the adaptive sampling
of the likelihood function. See details.</p>
</td></tr>
<tr valign="top"><td><code>prior</code></td>
<td>
<p>The prior used to fit the model. See <code><a href="../../Cyclops/html/createPrior.html">Cyclops::createPrior()</a></code>
for details.</p>
</td></tr>
<tr valign="top"><td><code>control</code></td>
<td>
<p>The control object used to control the cross-validation used to
determine the hyperparameters of the prior (if applicable). See
<code><a href="../../Cyclops/html/createControl.html">Cyclops::createControl()</a></code> for details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>IPTW estimates either the average treatment effect (ate) or average treatment effect in the treated
(att) using stabilized inverse propensity scores (Xu et al. 2010).
</p>
<p>For likelihood profiling, either specify the <code>profileGrid</code> for a completely user- defined grid, or
<code>profileBounds</code> for an adaptive grid. Both should be defined on the log effect size scale. When both
<code>profileGrid</code> and <code>profileGrid</code> are <code>NULL</code> likelihood profiling is disabled.
</p>


<h3>Value</h3>

<p>An object of class <code>OutcomeModel</code>. Generic function <code>print</code>, <code>coef</code>, and
<code>confint</code> are available.
</p>


<h3>References</h3>

<p>Xu S, Ross C, Raebel MA, Shetterly S, Blanchette C, Smith D. Use of stabilized inverse propensity scores
as weights to directly estimate relative risk and its confidence intervals. Value Health.
2010;13(2):273-277. doi:10.1111/j.1524-4733.2009.00671.x
</p>

<hr /><div style="text-align: center;">[Package <em>CohortMethod</em> version 4.2.0 <a href="00Index.html">Index</a>]</div>
</body></html>
